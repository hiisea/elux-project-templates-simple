import React from 'react';
import {Link} from '@elux/react-redux-web';
import styles from './index.module.<%= css %>';

interface Props {
<% if (platform==='ssr'){ -%>
  baseUrl: string;
<% } -%>
  totalPages: number;
  pageCurrent: number;
  onChange: (page: number) => void;
}

<% if (platform==='ssr'){ -%>
function replacePageNumber(baseUrl: string, pageCurrent: number): string {
  return baseUrl.replace(/\/page\/\d*$/, `/page/${pageCurrent}`);
}
<% } -%>
const Component: React.FC<Props> = ({totalPages, pageCurrent, onChange<%= platform==='ssr' ? ', baseUrl' : '' %>}) => {
  return (
    <div className={styles.root}>
      {pageCurrent > 1 && (
        <Link className="item" onClick={() => onChange(pageCurrent - 1)}<%= platform==='ssr' ? ' href={replacePageNumber(baseUrl, pageCurrent - 1)}':'' %>>
          上一页
        </Link>
      )}
      {pageCurrent < totalPages && (
        <Link className="item" onClick={() => onChange(pageCurrent + 1)}<%= platform==='ssr' ? ' href={replacePageNumber(baseUrl, pageCurrent + 1)}':''%>>
          下一页
        </Link>
      )}
      <div className="info">{`- 第 ${pageCurrent} 页 / 共 ${totalPages} 页 -`}</div>
    </div>
  );
};

export default React.memo(Component);
